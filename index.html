<!DOCTYPE HTML>
<html>
  <head>
    <title>POSH Training Portal</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="assets/css/main.css" />
  </head>
  <body class="is-preload">

    <!-- Wrapper -->
    <div id="wrapper">

      <!-- Main -->
      <div id="main">
        <div class="inner">

          <!-- Header -->
          <header id="header">
            <a href="index.html" class="logo"><strong>POSH</strong> Training Portal</a>
          </header>

          <!-- Hero Banner -->
          <section id="banner">
            <div class="content">
              <header>
                <h1>POSH Training Portal</h1>
                <p>Ensuring Respectful Workplaces</p>
              </header>
              <p>Verify your shop details and proceed through the steps to access the training modules.</p>
            </div>
            <span class="image object">
              <img src="images/pic10.jpg" alt="" />
            </span>
          </section>

          <!-- Steps Content -->
          <section>
            <div id="details-section">
              <header class="major">
                <h2>Step 1: Verify Your Details</h2>
              </header>
              <p id="shop-details"></p>
              <p><strong>Are the above details correct?</strong></p>
              <p style="color:#555;">क्या यह जानकारी सही है?</p>
              <ul class="actions">
                <li><a href="#" class="button" id="confirm-btn">Yes, I Confirm</a></li>
              </ul>
            </div>

            <div id="confirmation-section" class="hidden">
              <header class="major">
                <h2>Step 2: Here is your Password</h2>
              </header>
              <p id="confirmation-msg"></p>
              <div class="box">
                <p><strong>Password:</strong> <span id="shop-id"></span></p>
              </div>
              <p>Please copy this password and paste it into the <em>"Nickname"</em> field on the next page.</p>
              <p>कृपया इस पासवर्ड को कॉपी करें और आगे जाकर <em>"Nickname"</em> वाले बक्से में भर दें।</p>
              <ul class="actions">
                <li><a href="#" class="button" id="go-to-links-btn">Proceed to Training</a></li>
              </ul>
            </div>

            <div id="final-section" class="hidden">
              <header class="major">
                <h2>Step 3: Choose Your Training</h2>
              </header>
              <div class="features">
                <article>
                  <div class="content">
                    <h3>Owner/Manager Training</h3>
                    <ul class="actions">
                      <li><a href="#" class="button" id="btn-employer">Start Employer Training</a></li>
                    </ul>
                  </div>
                </article>
                <article>
                  <div class="content">
                    <h3>Employee Training</h3>
                    <ul class="actions">
                      <li><a href="#" class="button primary" id="btn-employee">Start Employee Training</a></li>
                    </ul>
                  </div>
                </article>
              </div>
            </div>
          </section>

        </div>
      </div>

      <!-- Sidebar -->
      <div id="sidebar">
        <div class="inner">
          <nav id="menu">
            <header class="major">
              <h2>Menu</h2>
            </header>
            <ul>
              <li><a href="index.html">Homepage</a></li>
              <li><a href="index104simpleshopid.html">POSH Portal</a></li>
            </ul>
          </nav>
        </div>
      </div>

    </div>

    <!-- Scripts -->
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/browser.min.js"></script>
    <script src="assets/js/breakpoints.min.js"></script>
    <script src="assets/js/util.js"></script>
    <script src="assets/js/main.js"></script>

    <!-- POSH Script -->
    <script>
      const shopData = [
        { shopid: 101, shopname: "FABINDIA", marketname: "KHAN MARKET" },
        { shopid: 102, shopname: "BLUE TOKAI", marketname: "RAJOURI GARDEN" },
        { shopid: 103, shopname: "SHOPPE", marketname: "HAUZ KHAS VILLAGE" },
        { shopid: 104, shopname: "NAPPA DORI", marketname: "VASANT VIHAR" },
        { shopid: 105, shopname: "HALDIRAMS", marketname: "NEW FRIENDS COLONY" }
      ];

      const SHEET_URL = "https://script.google.com/macros/s/AKfycbwE1pMUQ61CwBDXCA_q98YUm_34Uy9oNJQ8I_XBO4VAtUNAuB2EJOZ62h3UPVRs_hfHKw/exec";

      function trackUserDetails(shopid, shopname, marketname, role) {
        fetch(SHEET_URL, {
          method: "POST",
          mode: "no-cors",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ shopid, shopname, marketname, role, timestamp: new Date().toISOString() })
        });
        console.log("Logging:", shopid, shopname, marketname, role);
      }

      const params = new URLSearchParams(window.location.search);
      const shopIdFromUrl = parseInt(params.get("shopid"));
      const shopDetails = document.getElementById("shop-details");
      const confirmationMsg = document.getElementById("confirmation-msg");
      const shopIdElement = document.getElementById("shop-id");

      const detailsSection = document.getElementById("details-section");
      const confirmationSection = document.getElementById("confirmation-section");
      const finalSection = document.getElementById("final-section");

      const shop = shopData.find(shop => shop.shopid === shopIdFromUrl);
      if (shop) {
        shopDetails.innerText = `Shop: ${shop.shopname} | Market: ${shop.marketname}`;
      } else {
        shopDetails.innerText = "⚠️ Shop not found!";
      }

      document.getElementById("confirm-btn").onclick = () => {
        confirmationMsg.innerText = `Confirmed: ${shop.shopname}, ${shop.marketname}`;
        shopIdElement.innerText = shop.shopid;
        detailsSection.classList.add("hidden");
        confirmationSection.classList.remove("hidden");
      };

      document.getElementById("go-to-links-btn").onclick = () => {
        confirmationSection.classList.add("hidden");
        finalSection.classList.remove("hidden");
        window.scrollTo(0, document.body.scrollHeight);
      };

      const classroom1Link = "https://edpuzzle.com/assignments/68b1a7f9ddde8cb5f8362210/watch";
      const classroom2Link = "https://edpuzzle.com/assignments/68b1a7f9ddde8cb5f8362210/watch";

      document.getElementById("btn-employer").onclick = () => {
        trackUserDetails(shop.shopid, shop.shopname, shop.marketname, "Employer");
        window.location.href = classroom1Link;
      };
      document.getElementById("btn-employee").onclick = () => {
        trackUserDetails(shop.shopid, shop.shopname, shop.marketname, "Employee");
        window.location.href = classroom2Link;
      };
    </script>
  </body>
</html>
